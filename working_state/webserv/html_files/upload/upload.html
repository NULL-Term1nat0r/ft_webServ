<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Image Viewer</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: 'Courier New', monospace;-->
<!--            background-image: url('futuristic_cyberpunk_library_by_misconceptionaiart_dfxo50y-pre.jpeg');-->
<!--            background-size: 100% 500%;-->
<!--            background-position: center;-->
<!--            background-repeat: no-repeat;-->
<!--            background-color: #111;-->
<!--            margin: 20px;-->
<!--            color: #00ff00;-->
<!--        }-->

<!--        .transparent-box {-->
<!--            background-color: rgba(26, 26, 26, 0.8); /* Transparent background color */-->
<!--            padding: 10px;-->
<!--            border: 1px solid #29b6f6;-->
<!--            border-radius: 5px;-->
<!--            overflow-y: auto; /* Add a scrollbar when content exceeds the box height */-->
<!--            max-height: 300px; /* Adjust the max height based on your preference */-->
<!--            margin-top: 20px;-->
<!--        }-->

<!--        #imageViewerTitle {-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        #imageList {-->
<!--            list-style-type: none;-->
<!--            padding: 0;-->
<!--        }-->

<!--        #imageList li {-->
<!--            margin-bottom: 10px;-->
<!--        }-->

<!--        a {-->
<!--            color: #00ff00;-->
<!--            text-decoration: none;-->
<!--        }-->

<!--        a:hover {-->
<!--            text-decoration: underline;-->
<!--        }-->

<!--        #returnButton {-->
<!--            background-color: rgba(26, 26, 26, 0.8); /* Transparent background color */-->
<!--            color: #00ff00;-->
<!--            padding: 10px 20px;-->
<!--            border: 1px solid #29b6f6;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--            font-size: 18px;-->
<!--            margin-top: 20px;-->
<!--        }-->

<!--        #returnButton:hover {-->
<!--            background-color: #29b6f6;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<div class="transparent-box" id="imageViewerTitle">-->
<!--    <h1><a>Image Viewer</a></h1>-->
<!--</div>-->

<!--<div class="transparent-box" id="imageListContainer">-->
<!--    <ul id="imageList"></ul>-->
<!--</div>-->

<!--&lt;!&ndash; Return to main page button &ndash;&gt;-->
<!--<button id="returnButton" onclick="location.href='/index.html'">Return to Main Page</button>-->

<!--<script>-->
<!--    // Fetch image filenames using XMLHttpRequest-->
<!--    var xhr = new XMLHttpRequest();-->
<!--    xhr.open('GET', '/upload/getImages.php', true);-->

<!--    xhr.onload = function() {-->
<!--        if (xhr.status >= 200 && xhr.status < 400) {-->
<!--            // Parse JSON response-->
<!--            var data = JSON.parse(xhr.responseText);-->

<!--            // Check if data is an object-->
<!--            if (typeof data === 'object' && data !== null) {-->
<!--                // Display images as hyperlinks in the list-->
<!--                var imageList = document.getElementById('imageList');-->
<!--                for (var key in data) {-->
<!--                    if (data.hasOwnProperty(key)) {-->
<!--                        var image = data[key];-->
<!--                        var listItem = document.createElement('li');-->
<!--                        var link = document.createElement('a');-->
<!--                        link.href = '/upload/' + encodeURIComponent(image); // Encode the image filename-->
<!--                        link.textContent = image;-->
<!--                        listItem.appendChild(link);-->
<!--                        imageList.appendChild(listItem);-->
<!--                    }-->
<!--                }-->
<!--            } else {-->
<!--                console.error('Data is not an object:', data);-->
<!--            }-->
<!--        }-->
<!--    };-->

<!--    xhr.send();-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Viewer</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-image: url('futuristic_cyberpunk_library_by_misconceptionaiart_dfxo50y-pre.jpeg');
            background-size: 100% 500%;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #111;
            margin: 20px;
            color: #00ff00;
        }

        .transparent-box {
            background-color: rgba(26, 26, 26, 0.8); /* Transparent background color */
            padding: 10px;
            border: 1px solid #29b6f6;
            border-radius: 5px;
            overflow-y: auto; /* Add a scrollbar when content exceeds the box height */
            max-height: 300px; /* Adjust the max height based on your preference */
            margin-top: 20px;
        }

        #imageViewerTitle {
            margin-bottom: 20px;
        }

        #imageList {
            list-style-type: none;
            padding: 0;
        }

        #imageList li {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        a {
            color: #00ff00;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .deleteButton {
            background-color: #ff3b3b;
            color: #fff;
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .deleteButton:hover {
            background-color: #ff0000;
        }
    </style>
</head>
<body>

<div class="transparent-box" id="imageViewerTitle">
    <h1><a>Image Viewer</a></h1>
</div>

<div class="transparent-box" id="imageListContainer">
    <ul id="imageList"></ul>
</div>

<script>
    // Fetch image filenames using XMLHttpRequest
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/upload/getImages.php', true);

    xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status < 400) {
            // Parse JSON response
            var data = JSON.parse(xhr.responseText);

            // Check if data is an object
            if (typeof data === 'object' && data !== null) {
                // Display images as hyperlinks with delete buttons in the list
                var imageList = document.getElementById('imageList');
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        var image = data[key];
                        var listItem = document.createElement('li');
                        var link = document.createElement('a');
                        var deleteButton = document.createElement('button');

                        link.href = '/upload/' + encodeURIComponent(image); // Encode the image filename
                        link.textContent = image;

                        deleteButton.textContent = 'Delete';
                        deleteButton.className = 'deleteButton';
                        deleteButton.addEventListener('click', function(fileName) {
                            return function() {
                                // Call the delete function passing the filename
                                deleteFile(fileName);
                            };
                        }(image));

                        listItem.appendChild(link);
                        listItem.appendChild(deleteButton);
                        imageList.appendChild(listItem);
                    }
                }
            } else {
                console.error('Data is not an object:', data);
            }
        }
    };

    xhr.send();

    // Function to delete a file
    function deleteFile(fileName) {
        var xhrDelete = new XMLHttpRequest();
        xhrDelete.open('POST', '/upload/deleteFile.php', true);
        xhrDelete.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhrDelete.onload = function() {
            if (xhrDelete.status >= 200 && xhrDelete.status < 400) {
                // File deleted successfully, you can update the UI or take further actions
                console.log('File deleted successfully:', fileName);
            } else {
                console.error('Error deleting file:', fileName);
            }
        };
        xhrDelete.send('fileName=' + encodeURIComponent(fileName));
    }
</script>

</body>
</html>
